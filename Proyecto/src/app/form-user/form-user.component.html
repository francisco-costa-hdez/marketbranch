<div class="my-account featured-product product">
  <div class="section-header container-fluid pl-5">
      <div class="row align-items-end"> 
          <div class="col-12"><h1 class="row ">&nbsp;Registro de Cliente</h1></div>
      </div>
      
  </div>
  </div>
  <!-- <div  class="container-lg d-flex flex-column justify-content-center" *ngIf="this.userFormValid==true">
    <h3 class="mx-auto">¡Su usuario ha sido registrado correctamente! </h3>
    <p>Para poder acceder a su cuenta, le hemos enviado un correo de verificación a {{this.userForm.get('email').value}}, verifique su cuenta y podrá comenzar sus compras en AchoMarket.</p>
    <a class="mx-auto" routerLink="/home"><h3>Volver al inicio </h3></a>
    <img class="w-25 mx-auto" src="/assets/images/ach.png">
</div> -->
<!-- *ngIf="this.userFormValid==false && (this.emailExists==false || this.tlfExists==false)" -->
<div class="container-fluid d-flex justify-content-center">
<div class="card col-12 col-md-8 col-lg-6 ">
  <div class="card-body my-3">

<form (ngSubmit)="onSubmit()"
#clientForm="ngForm" class="needs-validation" [formGroup]="userForm" novalidate >
  
  <div class="form-group">
      <label for="name">Nombre</label>
      <input type="text" name="name" id="name" class="form-control" required
        formControlName="name">
        <div class="invalid-feedback" *ngIf="userForm.get('name').hasError('required')">
          Error, no has introducido el nombre
        </div>
    </div>
    <div class="form-group">
      <label for="address">Dirección</label>
      <input type="text" name="address" id ="address" class="form-control" required
        formControlName="address">
        <div class="invalid-feedback" *ngIf="userForm.get('address').hasError('required')">
          Error, no has introducido la direccion
        </div>
    </div>
    <div class="form-group">
      <label for="tlf">Teléfono</label>
      <input type="tel" name="tlf" id="tlf" class="form-control" required
        formControlName="tlf" pattern="^[9|8|7|6]\d{8}$" (change)="this.tlfExists=false">
        <div class="invalid-feedback" *ngIf="userForm.get('tlf').hasError('required'); else telBad">
          Error, no has introducido el telefono
        </div>
        <ng-template #telBad>
        <div class="invalid-feedback" *ngIf="userForm.get('tlf').hasError('pattern'); else telGood">
          El teléfono debe tener 9 caracteres y empezar por 9, 8, 7, o 6
        </div>
      </ng-template>
        <ng-template #telGood>
          <div class="valid-feedback">
            El patrón del teléfono es correcto
          </div>
        </ng-template>
        <div  *ngIf="this.tlfExists==true">
          <small style="color:#E05555">{{this.errorTlf}}</small>
        </div>
    </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" name="email" id="email" placeholder="micorreo@mail.com" required
          formControlName="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" (change)="this.emailExists=false">
          <div class="invalid-feedback" *ngIf="userForm.get('email').hasError('required'); else emailBad">
            Error, no has introducido el email
          </div>
          <ng-template #emailBad>
            <div class="invalid-feedback" *ngIf="userForm.get('email').hasError('pattern'); else emailGood">
              Error, no has introducido el email correctamente
            </div>
          </ng-template>
          <ng-template #emailGood>
            <div class="valid-feedback">
              El patrón del email es correcto
            </div>
          </ng-template>
          <div  *ngIf="this.emailExists==true">
            <small style="color:#E05555">{{this.errorEmail}}</small>
          </div>
      </div>

      <div class="form-group">
        <label for="profile_img">Seleccione imagen de perfil</label>
        <input type="file" class="form-control-file" id="profile_img" name="profile_img"
         formControlName="profile_img">
      </div>
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" class="form-control" id="password" name="password" required
          formControlName="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,18}">
          <div class="invalid-feedback" *ngIf="userForm.get('password').hasError('required'); else passBad">
            Error, debes introducir una contraseña
          </div>
          <ng-template #passBad>
            <div class="invalid-feedback" *ngIf="userForm.get('password').hasError('pattern');else passGood">
              Error, debes introducir mayúsculas, minúsculas y números entre 8 y 18 carácteres
            </div>
          </ng-template>
          <ng-template #passGood>
            <div class="valid-feedback">
              El patrón de contraseña es correcto
            </div>
          </ng-template>
        <label for="password2">Repita Contraseña</label>
        <input type="password" class="form-control" id="password2" name="password2" required formControlName="password2" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,18}">
        <div class="invalid-feedback" *ngIf="userForm.get('password2').hasError('required'); else passBad2" >
          Error, no has introducido la repetición de contraseña
        </div>
        <ng-template #passBad2>
          <div class="invalid-feedback" *ngIf="userForm.get('password2').hasError('pattern'); else passGood2">
            Error, debes introducir mayúsculas, minúsculas y números entre 8 y 18 carácteres
          </div>
        </ng-template>
        <ng-template #passGood2>
          <div class="valid-feedback">
            El patrón de contraseña es correcto
          </div>
        </ng-template>
        <div  *ngIf="!(this.userForm.get('password2').value==this.userForm.get('password').value)">
          <small style="color:#E05555">Las contraseñas no coinciden</small>
        </div>
        <small class="form-text text-muted">No compartas tu contraseña con terceros.</small>
      </div>
      
      <div class="form-check form-group">
        <input type="checkbox" class="form-check-input" id="check1" name="check1" formControlName="check1" required>
        <label class="form-check-label" for="check1">Acepto los <a href="">términos y condiciones</a> de la web</label>
        <div class="invalid-feedback" *ngIf="userForm.get('check1').hasError('required')">
          Error, no has aceptado los términos y condiciones
        </div>
      </div>
      <button type="submit"  class="btn btn-primary" style="margin-top:5%;">Registrarse</button>
    
  </form>
  </div>
  </div>
</div>
